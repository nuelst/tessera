@baseUrl = http://localhost:3333
@token = {{authenticate.response.body.access_token}}
@userId = {{createUser.response.body.id}}
@capsuleId = {{createCapsule.response.body.id}}

###
### üîê LOGIN DO USU√ÅRIO
# @name authenticate
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "other@example.com",
  "password": "Pw123452!"
}

###
### üë§ CRIAR NOVO USU√ÅRIO
# @name createUser
POST {{baseUrl}}/user
Content-Type: application/json

{
  "name": "John Doe",
  "email": "other@example.com",
  "password": "Pw123452!"
}

###
### üë§ LISTAR TODOS OS USU√ÅRIOS
# @name listUsers
GET {{baseUrl}}/user
Content-Type: application/json
Authorization: Bearer {{token}}

###
### üë§ BUSCAR USU√ÅRIO POR ID
# @name getUserById
GET {{baseUrl}}/user/{{userId}}

###
### üë§ ATUALIZAR USU√ÅRIO
# @name updateUser
PATCH {{baseUrl}}/user/{{userId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "name": "John Doe Updated"
}

###
### üë§ DELETAR USU√ÅRIO
# @name deleteUser
DELETE {{baseUrl}}/user/{{userId}}
Authorization: Bearer {{token}}

###
### üì¶ CRIAR NOVA C√ÅPSULA
# @name createCapsule
POST {{baseUrl}}/capsules
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "message": "Mensagem para o futuro",
  "recipientEmail": "manuelds@outook.pt",
  "attachmentUrl": "https://meusite.com/anexo.png",
  "sendAt": "2025-06-24T17:00:00.000Z",
  "status": "pending"
}

###
### üì¶ LISTAR TODAS AS C√ÅPSULAS (global - admin/debug)
# @name listAllCapsules
GET {{baseUrl}}/capsules
Authorization: Bearer {{token}}

###
### üì¶ LISTAR C√ÅPSULAS DO USU√ÅRIO AUTENTICADO
# @name listMyCapsules
GET {{baseUrl}}/capsules/me
Authorization: Bearer {{token}}

###
### üì¶ BUSCAR C√ÅPSULA POR ID
# @name getCapsuleById
GET {{baseUrl}}/capsules/{{capsuleId}}
Authorization: Bearer {{token}}

###
### üì¶ ATUALIZAR C√ÅPSULA
# @name updateCapsule
PATCH {{baseUrl}}/capsules/{{capsuleId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "message": "Mensagem atualizada",
  "recipientEmail": "novo@email.com"
}

###
### üì¶ DELETAR C√ÅPSULA
# @name deleteCapsule
DELETE {{baseUrl}}/capsules/{{capsuleId}}
Authorization: Bearer {{token}}